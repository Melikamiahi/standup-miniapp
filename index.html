<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Standup Randomizer</title>
  <script src="https://tapi.bale.ai/miniapp.js?3"></script>
  <style>
    :root {
      --bg: #0f1117;
      --bg-card: rgba(255,255,255,0.04);
      --border: rgba(255,255,255,0.07);
      --border-active: rgba(56,189,248,0.25);
      --text: #e2e8f0;
      --text-dim: #64748b;
      --text-muted: #475569;
      --accent: #38bdf8;
      --accent-2: #818cf8;
      --accent-3: #c084fc;
      --danger: #ef4444;
      --warning: #f59e0b;
      --success: #22c55e;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, 'Segoe UI', Tahoma, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
      -webkit-tap-highlight-color: transparent;
      padding-bottom: env(safe-area-inset-bottom, 20px);
    }

    .bg-grid {
      position: fixed; inset: 0; pointer-events: none; z-index: 0;
      background-image:
        linear-gradient(rgba(56,189,248,0.025) 1px, transparent 1px),
        linear-gradient(90deg, rgba(56,189,248,0.025) 1px, transparent 1px);
      background-size: 50px 50px;
    }
    .bg-glow {
      position: fixed; top: -250px; left: 50%; transform: translateX(-50%);
      width: 600px; height: 600px; pointer-events: none; z-index: 0;
      background: radial-gradient(circle, rgba(56,189,248,0.07) 0%, transparent 70%);
    }

    .container {
      max-width: 480px; margin: 0 auto;
      padding: 24px 16px 40px; position: relative; z-index: 1;
    }

    .header { text-align: center; margin-bottom: 28px; }
    .badge {
      display: inline-block; padding: 5px 14px;
      background: rgba(56,189,248,0.1); border: 1px solid rgba(56,189,248,0.2);
      border-radius: 100px; font-size: 11px; font-weight: 700;
      color: var(--accent); letter-spacing: 0.3px; margin-bottom: 12px;
    }
    .title {
      font-size: 28px; font-weight: 800; color: #f1f5f9;
      letter-spacing: -0.5px; line-height: 1.3; margin-bottom: 6px;
    }
    .subtitle { font-size: 13px; color: var(--text-dim); font-weight: 400; }

    .section { margin-bottom: 24px; }
    .section-label {
      font-size: 10px; font-weight: 700; color: var(--text-muted);
      text-transform: uppercase; letter-spacing: 1.2px;
      margin-bottom: 10px; padding: 0 2px;
    }

    /* Member List with Toggle */
    .member-list { display: flex; flex-direction: column; gap: 6px; }
    .member-item {
      display: flex; align-items: center; gap: 12px;
      padding: 12px 14px; background: var(--bg-card);
      border: 1px solid var(--border); border-radius: 12px;
      transition: all 0.25s; cursor: pointer;
    }
    .member-item:active { transform: scale(0.98); }
    .member-item.disabled {
      opacity: 0.4;
      background: transparent;
    }
    .member-emoji { font-size: 20px; transition: filter 0.25s; }
    .member-item.disabled .member-emoji { filter: grayscale(1); }
    .member-name { flex: 1; font-size: 14px; font-weight: 600; color: #cbd5e1; }
    .member-item.disabled .member-name { text-decoration: line-through; color: var(--text-muted); }
    
    .toggle {
      width: 44px; height: 26px; border-radius: 13px;
      background: rgba(255,255,255,0.1); position: relative;
      transition: background 0.25s; flex-shrink: 0;
    }
    .toggle.active { background: var(--success); }
    .toggle::after {
      content: ''; position: absolute;
      width: 20px; height: 20px; border-radius: 50%;
      background: #fff; top: 3px; right: 3px;
      transition: transform 0.25s; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .toggle.active::after { transform: translateX(-18px); }

    .active-count-badge {
      text-align: center; padding: 8px;
      font-size: 12px; color: var(--text-dim);
    }
    .active-count-badge strong { color: var(--accent); }

    /* Settings */
    .settings-row {
      display: flex; align-items: center; gap: 10px;
      padding: 11px 14px; background: var(--bg-card);
      border: 1px solid var(--border); border-radius: 10px;
    }
    .settings-label { font-size: 13px; color: #94a3b8; flex: 1; }
    .settings-select {
      padding: 7px 10px; background: rgba(255,255,255,0.06);
      border: 1px solid var(--border); border-radius: 8px;
      color: var(--text); font-size: 12px; font-family: inherit;
      cursor: pointer; direction: ltr;
    }

    /* Shuffle Button */
    .btn-shuffle {
      width: 100%; padding: 16px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2), var(--accent-3));
      border: none; border-radius: 14px; color: #fff;
      font-size: 16px; font-weight: 800; cursor: pointer;
      font-family: inherit; letter-spacing: -0.3px;
      transition: transform 0.2s, opacity 0.2s;
      position: relative; overflow: hidden;
    }
    .btn-shuffle:active { transform: scale(0.98); opacity: 0.9; }
    .btn-shuffle.disabled {
      background: rgba(255,255,255,0.05); color: var(--text-muted);
      cursor: not-allowed; pointer-events: none;
    }
    .btn-shuffle .shimmer {
      position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
      animation: shimmer 2.5s infinite;
    }
    @keyframes shimmer { 0% { left: -100%; } 100% { left: 100%; } }

    /* Shuffle Overlay - Original Style */
    .shuffle-overlay {
      position: fixed; inset: 0; z-index: 100;
      background: rgba(0,0,0,0.75); backdrop-filter: blur(10px);
      display: flex; align-items: center; justify-content: center;
    }
    .shuffle-card { text-align: center; padding: 40px; }
    .shuffle-label {
      font-size: 14px; color: var(--accent); font-weight: 600; margin-bottom: 20px;
    }
    .shuffle-names { display: flex; flex-direction: column; gap: 8px; align-items: center; }
    .shuffle-name {
      font-size: 20px; font-weight: 700; color: #f1f5f9; padding: 6px 16px;
      display: flex; align-items: center; gap: 10px;
      animation: shufflePop 0.1s ease-out;
    }
    @keyframes shufflePop {
      0% { transform: scale(0.8) translateY(-10px); opacity: 0.5; }
      100% { transform: scale(1) translateY(0); opacity: 1; }
    }

    /* Active Standup Card */
    .active-card {
      background: rgba(56,189,248,0.04);
      border: 1px solid rgba(56,189,248,0.12);
      border-radius: 18px; padding: 28px 20px;
      text-align: center; margin-bottom: 20px;
      position: relative; overflow: hidden;
    }
    .active-glow {
      position: absolute; top: 0; left: 50%; transform: translateX(-50%);
      width: 250px; height: 2px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
      transition: background 0.5s;
    }
    .active-glow.overtime {
      background: linear-gradient(90deg, transparent, var(--danger), transparent);
    }
    .active-emoji { font-size: 36px; margin-bottom: 6px; }
    .active-name {
      font-size: 26px; font-weight: 800; color: #f1f5f9; margin-bottom: 2px;
    }
    .active-count { font-size: 12px; color: var(--text-dim); margin-bottom: 20px; }
    .timer-display {
      font-size: 42px; font-weight: 800; color: var(--accent);
      font-variant-numeric: tabular-nums; font-family: 'Courier New', monospace;
      direction: ltr; margin-bottom: 6px; transition: color 0.5s;
    }
    .timer-display.warning { color: var(--warning); }
    .timer-display.overtime { color: var(--danger); }
    .progress-bar {
      height: 3px; background: rgba(255,255,255,0.06);
      border-radius: 100px; overflow: hidden; margin-bottom: 20px;
    }
    .progress-fill {
      height: 100%; border-radius: 100px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transition: width 1s linear, background 0.5s;
    }
    .progress-fill.warning { background: var(--warning); }
    .progress-fill.overtime { background: var(--danger); }

    .btn-row { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
    .btn-action {
      padding: 11px 22px; border-radius: 11px; border: none;
      font-size: 13px; font-weight: 700; cursor: pointer;
      transition: transform 0.15s, opacity 0.15s; font-family: inherit;
    }
    .btn-action:active { transform: scale(0.96); opacity: 0.9; }
    .btn-next { background: linear-gradient(135deg, var(--accent), #2563eb); color: #fff; }
    .btn-skip {
      background: rgba(255,255,255,0.06); color: #94a3b8;
      border: 1px solid var(--border);
    }
    .btn-pause {
      background: rgba(255,255,255,0.06); color: #94a3b8;
      border: 1px solid var(--border); min-width: 44px;
    }

    /* Queue */
    .queue-list { display: flex; flex-direction: column; gap: 3px; }
    .queue-item {
      display: flex; align-items: center; gap: 10px;
      padding: 9px 12px; border-radius: 9px;
      background: var(--bg-card); border: 1px solid transparent;
      transition: all 0.3s;
    }
    .queue-item.active {
      background: rgba(56,189,248,0.06);
      border-color: rgba(56,189,248,0.18);
    }
    .queue-item.done { opacity: 0.35; }
    .queue-num {
      width: 22px; height: 22px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 10px; font-weight: 700; flex-shrink: 0;
      background: rgba(255,255,255,0.06); color: var(--text-dim);
    }
    .queue-num.active { background: rgba(56,189,248,0.18); color: var(--accent); }
    .queue-name { font-size: 13px; font-weight: 500; color: #94a3b8; flex: 1; }
    .queue-name.active { font-weight: 700; color: #f1f5f9; }
    .queue-badge {
      font-size: 10px; color: var(--accent); font-weight: 600;
      background: rgba(56,189,248,0.1); padding: 2px 8px;
      border-radius: 100px;
    }
    .done-check { font-size: 12px; color: var(--success); }

    /* Summary */
    .summary-card {
      background: rgba(34,197,94,0.05);
      border: 1px solid rgba(34,197,94,0.15);
      border-radius: 18px; padding: 28px 20px;
      text-align: center; margin-bottom: 20px;
    }
    .summary-icon { font-size: 36px; margin-bottom: 8px; }
    .summary-title { font-size: 20px; font-weight: 800; color: #f1f5f9; margin-bottom: 4px; }
    .summary-subtitle { font-size: 12px; color: var(--text-dim); margin-bottom: 16px; }
    .summary-stat {
      display: inline-block; padding: 6px 14px; margin: 3px;
      background: rgba(255,255,255,0.04); border-radius: 8px;
      font-size: 12px; color: #94a3b8;
    }
    .summary-stat strong { color: var(--text); }
    .btn-restart {
      margin-top: 16px; padding: 12px 28px;
      background: linear-gradient(135deg, var(--success), #16a34a);
      border: none; border-radius: 12px; color: #fff;
      font-size: 14px; font-weight: 700; cursor: pointer;
      font-family: inherit;
    }
  </style>
</head>
<body>

<div class="bg-grid"></div>
<div class="bg-glow"></div>
<div class="container" id="app"></div>

<script>
(function() {
  const WebApp = window.Bale?.WebApp;
  if (WebApp) {
    try {
      WebApp.ready();
      WebApp.expand();
      if (WebApp.themeParams) {
        const tp = WebApp.themeParams;
        if (tp.bg_color) document.documentElement.style.setProperty('--bg', tp.bg_color);
        if (tp.text_color) document.documentElement.style.setProperty('--text', tp.text_color);
        if (tp.hint_color) document.documentElement.style.setProperty('--text-dim', tp.hint_color);
        if (tp.button_color) document.documentElement.style.setProperty('--accent', tp.button_color);
      }
    } catch(e) {}
  }

  // Fixed team members
  const TEAM = [
    { id: '1', name: 'Ù…Ù„ÛŒÚ©Ø§ Ù…ÛŒØ§Ù‡ÛŒ', emoji: 'ğŸ’œ' },
    { id: '2', name: 'Ø¹Ø§Ø·ÙÙ‡ Ø·Ø§Ù‡Ø±ÛŒ', emoji: 'ğŸ’™' },
    { id: '3', name: 'Ø¢Ø±Ø§Ø¯ Ø­ØµØ§Ø¯ÛŒ', emoji: 'ğŸ’š' },
    { id: '4', name: 'ÙØ§Ø¦Ø²Ù‡ Ú¯Ù„Ø±Ø®Ø§Ù†', emoji: 'ğŸ§¡' },
    { id: '5', name: 'Ø¹Ø¨Ø§Ø³ Ù¾ÙˆØ±Ø§Ù…ÛŒÙ†ÛŒ', emoji: 'â¤ï¸' },
    { id: '6', name: 'Ù†ÙˆÛŒØ¯ Ù…ÙˆØ³ÙˆÛŒâ€ŒÙ†Ú˜Ø§Ø¯', emoji: 'ğŸ’›' },
  ];

  // Load disabled members from storage
  function loadDisabled() {
    try {
      const raw = localStorage.getItem('standup_disabled');
      return raw ? JSON.parse(raw) : [];
    } catch(e) { return []; }
  }
  function saveDisabled(arr) {
    try { localStorage.setItem('standup_disabled', JSON.stringify(arr)); } catch(e) {}
  }

  let state = {
    disabledIds: loadDisabled(),
    order: [],
    currentIndex: -1,
    isShuffling: false,
    shuffleDisplay: [],
    timer: 0,
    timerActive: false,
    timeLimit: 120,
    totalTime: 0,
    finished: false,
  };

  let timerInterval = null;

  function getActiveMembers() {
    return TEAM.filter(m => !state.disabledIds.includes(m.id));
  }

  function toggleMember(id) {
    if (state.disabledIds.includes(id)) {
      state.disabledIds = state.disabledIds.filter(x => x !== id);
    } else {
      state.disabledIds.push(id);
    }
    saveDisabled(state.disabledIds);
    render();
  }

  function shuffle(arr) {
    const s = [...arr];
    for (let i = s.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [s[i], s[j]] = [s[j], s[i]];
    }
    return s;
  }

  function formatTime(s) {
    const m = Math.floor(s / 60);
    const sec = s % 60;
    return m + ':' + String(sec).padStart(2, '0');
  }

  function startShuffle() {
    const active = getActiveMembers();
    if (active.length < 2) return;

    state.isShuffling = true;
    state.currentIndex = -1;
    state.finished = false;
    state.totalTime = 0;
    stopTimer();
    render();

    let count = 0;
    const maxCount = 18;
    const interval = setInterval(() => {
      state.shuffleDisplay = shuffle(active);
      render();
      count++;
      if (count >= maxCount) {
        clearInterval(interval);
        state.order = shuffle(active);
        state.shuffleDisplay = [];
        state.isShuffling = false;
        state.currentIndex = 0;
        state.timer = 0;
        startTimer();
        render();
      }
    }, 90);
  }

  function startTimer() {
    stopTimer();
    state.timerActive = true;
    timerInterval = setInterval(() => {
      state.timer++;
      renderTimer();
    }, 1000);
  }

  function stopTimer() {
    state.timerActive = false;
    clearInterval(timerInterval);
    timerInterval = null;
  }

  function toggleTimer() {
    if (state.timerActive) stopTimer();
    else startTimer();
    render();
  }

  function nextPerson() {
    state.totalTime += state.timer;
    if (state.currentIndex < state.order.length - 1) {
      state.currentIndex++;
      state.timer = 0;
      startTimer();
    } else {
      state.finished = true;
      state.currentIndex = -1;
      stopTimer();
    }
    render();
  }

  function skipPerson() {
    if (state.currentIndex >= 0 && state.currentIndex < state.order.length) {
      const skipped = state.order[state.currentIndex];
      state.order.splice(state.currentIndex, 1);
      state.order.push(skipped);
      state.timer = 0;
      render();
    }
  }

  function newRound() {
    state.order = [];
    state.currentIndex = -1;
    state.finished = false;
    state.totalTime = 0;
    stopTimer();
    render();
  }

  function renderTimer() {
    const timerEl = document.getElementById('timerDisplay');
    const progressEl = document.getElementById('progressFill');
    const glowEl = document.getElementById('activeGlow');
    if (!timerEl) return;

    const isOver = state.timer > state.timeLimit;
    const isWarn = state.timer > state.timeLimit * 0.8;
    const progress = Math.min((state.timer / state.timeLimit) * 100, 100);

    timerEl.textContent = formatTime(state.timer);
    timerEl.className = 'timer-display' + (isOver ? ' overtime' : isWarn ? ' warning' : '');
    if (progressEl) {
      progressEl.style.width = progress + '%';
      progressEl.className = 'progress-fill' + (isOver ? ' overtime' : isWarn ? ' warning' : '');
    }
    if (glowEl) glowEl.className = 'active-glow' + (isOver ? ' overtime' : '');
  }

  function render() {
    const app = document.getElementById('app');
    const active = getActiveMembers();
    let html = '';

    // Header
    html += `
      <div class="header">
        <div class="badge">âš¡ Team Standup</div>
        <h1 class="title">Ù†ÙˆØ¨Øªâ€ŒØ¯Ù‡ÛŒ Ø±Ù†Ø¯ÙˆÙ…</h1>
        <p class="subtitle">ØªÛŒÙ… Ù¾Ø±ÙˆØ¯Ø§Ú©Øª Ø¨Ù„Ù‡</p>
      </div>
    `;

    // Finished
    if (state.finished) {
      const avgTime = state.order.length > 0 ? Math.round(state.totalTime / state.order.length) : 0;
      html += `
        <div class="summary-card">
          <div class="summary-icon">ğŸ‰</div>
          <div class="summary-title">Ø§Ø³ØªÙ†Ø¯Ø¢Ù¾ ØªÙ…ÙˆÙ… Ø´Ø¯!</div>
          <div class="summary-subtitle">${state.order.length} Ù†ÙØ± ØµØ­Ø¨Øª Ú©Ø±Ø¯Ù†</div>
          <div>
            <span class="summary-stat">â± Ú©Ù„: <strong>${formatTime(state.totalTime)}</strong></span>
            <span class="summary-stat">ğŸ“Š Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†: <strong>${formatTime(avgTime)}</strong></span>
          </div>
          <button class="btn-restart" onclick="window._app.newRound()">ğŸ”„ Ø¯ÙˆØ± Ø¬Ø¯ÛŒØ¯</button>
        </div>
      `;
      app.innerHTML = html;
      return;
    }

    // Active standup
    if (state.currentIndex >= 0 && state.order.length > 0) {
      const current = state.order[state.currentIndex];
      const isOver = state.timer > state.timeLimit;
      const isWarn = state.timer > state.timeLimit * 0.8;
      const progress = Math.min((state.timer / state.timeLimit) * 100, 100);

      html += `
        <div class="active-card">
          <div id="activeGlow" class="active-glow${isOver ? ' overtime' : ''}"></div>
          <div class="active-emoji">${current.emoji}</div>
          <div class="active-name">${current.name}</div>
          <p class="active-count">Ù†ÙØ± ${state.currentIndex + 1} Ø§Ø² ${state.order.length}</p>
          <div id="timerDisplay" class="timer-display${isOver ? ' overtime' : isWarn ? ' warning' : ''}">${formatTime(state.timer)}</div>
          <div class="progress-bar">
            <div id="progressFill" class="progress-fill${isOver ? ' overtime' : isWarn ? ' warning' : ''}" style="width:${progress}%"></div>
          </div>
          <div class="btn-row">
            <button class="btn-action btn-next" onclick="window._app.nextPerson()">
              ${state.currentIndex < state.order.length - 1 ? 'Ù†ÙØ± Ø¨Ø¹Ø¯ÛŒ â†' : 'Ø§ØªÙ…Ø§Ù… âœ“'}
            </button>
            ${state.currentIndex < state.order.length - 1 ? `
              <button class="btn-action btn-skip" onclick="window._app.skipPerson()">Ø±Ø¯ Ø´Ùˆ</button>
            ` : ''}
            <button class="btn-action btn-pause" onclick="window._app.toggleTimer()">
              ${state.timerActive ? 'â¸' : 'â–¶'}
            </button>
          </div>
        </div>
      `;

      // Queue
      html += `<div class="section"><div class="section-label">ØµÙ ØµØ­Ø¨Øª</div><div class="queue-list">`;
      state.order.forEach((member, i) => {
        const isActive = i === state.currentIndex;
        const isDone = i < state.currentIndex;
        html += `
          <div class="queue-item${isActive ? ' active' : ''}${isDone ? ' done' : ''}">
            <div class="queue-num${isActive ? ' active' : ''}">
              ${isDone ? '<span class="done-check">âœ“</span>' : (i + 1)}
            </div>
            <span style="font-size:14px">${member.emoji}</span>
            <span class="queue-name${isActive ? ' active' : ''}">${member.name}</span>
            ${isActive ? '<span class="queue-badge">Ø¯Ø± Ø­Ø§Ù„ ØµØ­Ø¨Øª</span>' : ''}
          </div>
        `;
      });
      html += `</div></div>`;

    } else {
      // Setup mode - member list with toggles
      html += `<div class="section"><div class="section-label">Ø§Ø¹Ø¶Ø§ÛŒ ØªÛŒÙ… (Ø¨Ø±Ø§ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† ØªÙ¾ Ú©Ù†)</div><div class="member-list">`;
      TEAM.forEach(m => {
        const isDisabled = state.disabledIds.includes(m.id);
        html += `
          <div class="member-item ${isDisabled ? 'disabled' : ''}" onclick="window._app.toggleMember('${m.id}')">
            <span class="member-emoji">${m.emoji}</span>
            <span class="member-name">${m.name}</span>
            <div class="toggle ${isDisabled ? '' : 'active'}"></div>
          </div>
        `;
      });
      html += `</div>`;
      html += `<div class="active-count-badge"><strong>${active.length}</strong> Ù†ÙØ± ÙØ¹Ø§Ù„ Ø§Ø² ${TEAM.length} Ù†ÙØ±</div></div>`;

      // Settings
      html += `
        <div class="section">
          <div class="section-label">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</div>
          <div class="settings-row">
            <span class="settings-label">â± Ø²Ù…Ø§Ù† Ù‡Ø± Ù†ÙØ±</span>
            <select class="settings-select" onchange="window._app.state.timeLimit = Number(this.value)">
              <option value="60" ${state.timeLimit === 60 ? 'selected' : ''}>Û± Ø¯Ù‚ÛŒÙ‚Ù‡</option>
              <option value="90" ${state.timeLimit === 90 ? 'selected' : ''}>Û±:Û³Û° Ø¯Ù‚ÛŒÙ‚Ù‡</option>
              <option value="120" ${state.timeLimit === 120 ? 'selected' : ''}>Û² Ø¯Ù‚ÛŒÙ‚Ù‡</option>
              <option value="180" ${state.timeLimit === 180 ? 'selected' : ''}>Û³ Ø¯Ù‚ÛŒÙ‚Ù‡</option>
              <option value="300" ${state.timeLimit === 300 ? 'selected' : ''}>Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡</option>
            </select>
          </div>
        </div>
      `;

      // Shuffle button
      const canStart = active.length >= 2;
      html += `
        <button class="btn-shuffle ${canStart ? '' : 'disabled'}" onclick="window._app.startShuffle()" ${canStart ? '' : 'disabled'}>
          ${canStart ? '<span class="shimmer"></span>ğŸ²  Ø´Ø±ÙˆØ¹ Ø§Ø³ØªÙ†Ø¯Ø¢Ù¾' : 'Ø­Ø¯Ø§Ù‚Ù„ Û² Ù†ÙØ± ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ù†'}
        </button>
      `;
    }

    // Shuffle overlay
    if (state.isShuffling) {
      html += `
        <div class="shuffle-overlay">
          <div class="shuffle-card">
            <div class="shuffle-label">ğŸ² Ø¯Ø± Ø­Ø§Ù„ Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ...</div>
            <div class="shuffle-names">
              ${state.shuffleDisplay.map(m => `<div class="shuffle-name">${m.emoji} ${m.name}</div>`).join('')}
            </div>
          </div>
        </div>
      `;
    }

    app.innerHTML = html;
  }

  window._app = {
    state,
    toggleMember, startShuffle, nextPerson, skipPerson, toggleTimer, newRound,
  };

  render();
})();
</script>

</body>
</html>
